(self.webpackChunksiren=self.webpackChunksiren||[]).push([[2341],{1410:function(e,t,n){var i=n(7694),r=n(3618);e.exports={title:"Siren",tagline:"Universal data observability toolkit",url:"https://odpf.github.io",baseUrl:"/siren/",onBrokenLinks:"throw",onBrokenMarkdownLinks:"warn",favicon:"img/favicon.ico",organizationName:"odpf",projectName:"siren",customFields:{apiVersion:"v1beta1",defaultHost:"http://localhost:8080"},themeConfig:{colorMode:{defaultMode:"light",respectPrefersColorScheme:!0,switchConfig:{darkIcon:"\u263e",lightIcon:"\u2600\ufe0f"}},navbar:{title:"Siren",logo:{src:"img/logo.svg"},items:[{type:"doc",docId:"introduction",position:"left",label:"Docs"},{to:"/blog",label:"Blog",position:"left"},{to:"/help",label:"Help",position:"left"},{href:"https://bit.ly/2RzPbtn",position:"right",className:"header-slack-link"},{href:"https://github.com/odpf/siren",className:"navbar-item-github",position:"right"}]},footer:{style:"light",links:[{title:"Products",items:[{label:"Meteor",href:"https://github.com/odpf/meteor"},{label:"Firehose",href:"https://github.com/odpf/firehose"},{label:"Raccoon",href:"https://github.com/odpf/raccoon"},{label:"Dagger",href:"https://odpf.github.io/dagger/"}]},{title:"Resources",items:[{label:"Docs",to:"/docs/introduction"},{label:"Blog",to:"/blog"},{label:"Help",to:"/help"}]},{title:"Community",items:[{label:"Slack",href:"https://bit.ly/2RzPbtn"},{label:"GitHub",href:"https://github.com/odpf/siren"}]}],copyright:"Copyright \xa9 2022-"+(new Date).getFullYear()+" ODPF"},prism:{theme:i,darkTheme:r},gtag:{trackingID:"G-XXX"},announcementBar:{id:"star-repo",content:'\u2b50\ufe0f If you like Siren, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/odpf/siren">GitHub</a>! \u2b50',backgroundColor:"#222",textColor:"#eee",isCloseable:!0}},presets:[["@docusaurus/preset-classic",{docs:{showLastUpdateAuthor:!0,showLastUpdateTime:!0,sidebarPath:6679,editUrl:"https://github.com/odpf/siren/edit/master/docs/"},blog:{showReadingTime:!0,editUrl:"https://github.com/odpf/siren/edit/master/docs/blog/"},theme:{customCss:[5308,2295]}}]]}},8215:function(e,t,n){"use strict";var i=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return i.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},5064:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(7294),r=n(9443);var a=function(){var e=(0,i.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},o=n(6010),s="tabItem_vU9c",l="tabItemActive_cw6a";var c=function(e){var t,n=e.lazy,r=e.block,c=e.defaultValue,u=e.values,p=e.groupId,d=e.className,b=i.Children.toArray(e.children),m=null!=u?u:b.map((function(e){return{value:e.props.value,label:e.props.label}})),g=null!=c?c:null==(t=b.find((function(e){return e.props.default})))?void 0:t.props.value,h=a(),f=h.tabGroupChoices,v=h.setTabGroupChoices,y=(0,i.useState)(g),k=y[0],T=y[1],C=[];if(null!=p){var I=f[p];null!=I&&I!==k&&m.some((function(e){return e.value===I}))&&T(I)}var w=function(e){var t=e.currentTarget,n=C.indexOf(t),i=m[n].value;T(i),null!=p&&(v(p,i),setTimeout((function(){var e,n,i,r,a,o,s,c;(e=t.getBoundingClientRect(),n=e.top,i=e.left,r=e.bottom,a=e.right,o=window,s=o.innerHeight,c=o.innerWidth,n>=0&&a<=c&&r<=s&&i>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},N=function(e){var t,n=null;switch(e.key){case"ArrowRight":var i=C.indexOf(e.target)+1;n=C[i]||C[0];break;case"ArrowLeft":var r=C.indexOf(e.target)-1;n=C[r]||C[C.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":r},d)},m.map((function(e){var t=e.value,n=e.label;return i.createElement("li",{role:"tab",tabIndex:k===t?0:-1,"aria-selected":k===t,className:(0,o.Z)("tabs__item",s,{"tabs__item--active":k===t}),key:t,ref:function(e){return C.push(e)},onKeyDown:N,onFocus:w,onClick:w},null!=n?n:t)}))),n?(0,i.cloneElement)(b.filter((function(e){return e.props.value===k}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},b.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==k})}))))}},6679:function(e){e.exports={docsSidebar:["introduction",{type:"category",label:"Tour",items:["tour/introduction","tour/startup_siren_server","tour/registering_provider","tour/registering_receivers","tour/sending_notifications_to_receiver","tour/configuring_provider_alerting_rules","tour/subscribing_notifications"]},{type:"category",label:"Concepts",items:["concepts/overview","concepts/plugin","concepts/schema"]},{type:"category",label:"Guides",items:["guides/overview","guides/provider_and_namespace","guides/receiver","guides/subscription","guides/rule","guides/template","guides/alert_history","guides/notification","guides/deployment"]},{type:"category",label:"Contribute",items:["contribute/contribution","contribute/receiver","contribute/provider","contribute/release"]},{type:"category",label:"Reference",items:["reference/api","reference/server_configuration","reference/client_configuration","reference/receiver","reference/cli"]}]}},7784:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return d},contentTitle:function(){return b},metadata:function(){return m},toc:function(){return g},apiVersion:function(){return h},defaultHost:function(){return f},default:function(){return y}});var i=n(7462),r=n(3366),a=(n(7294),n(3905)),o=n(5064),s=n(8215),l=n(6213),c=n(1410),u=n.n(c),p=["components"],d={},b="Subscription",m={unversionedId:"guides/subscription",id:"guides/subscription",isDocsHomePage:!1,title:"Subscription",description:"export const apiVersion = siteConfig.customFields.apiVersion",source:"@site/docs/guides/subscription.md",sourceDirName:"guides",slug:"/guides/subscription",permalink:"/siren/docs/guides/subscription",editUrl:"https://github.com/odpf/siren/edit/master/docs/docs/guides/subscription.md",tags:[],version:"current",lastUpdatedBy:"Ravi Suhag",lastUpdatedAt:1666359878,formattedLastUpdatedAt:"10/21/2022",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Receiver",permalink:"/siren/docs/guides/receiver"},next:{title:"Rule",permalink:"/siren/docs/guides/rule"}},g=[{value:"API Interface",id:"api-interface",children:[{value:"Create a subscription",id:"create-a-subscription",children:[]},{value:"Update a subscription",id:"update-a-subscription",children:[]},{value:"Get all subscriptions",id:"get-all-subscriptions",children:[]},{value:"Get a subscriptions",id:"get-a-subscriptions",children:[]},{value:"Delete subscriptions",id:"delete-subscriptions",children:[]}]}],h=u().customFields.apiVersion,f=u().customFields.defaultHost,v={toc:g,apiVersion:h};function y(e){var t=e.components,n=(0,r.Z)(e,p);return(0,a.kt)("wrapper",(0,i.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"subscription"},"Subscription"),(0,a.kt)("p",null,"Siren lets you subscribe to a notification when they are triggered. You can define custom matching conditions and use\n",(0,a.kt)("a",{parentName:"p",href:"/siren/docs/guides/receiver"},"receivers")," to describe which medium you want to use for getting the notifications when a notification is triggered. A notification could be triggered on-demand via API or by the incoming alerts via webhook."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example Subscription:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "385",\n  "urn": "siren-dev-prod-critical",\n  "namespace": "10",\n  "receivers": [\n    {\n      "id": "2"\n    },\n    {\n      "id": "1",\n      "configuration": {\n        "channel_name": "siren-dev-critical"\n      }\n    }\n  ],\n  "match": {\n    "environment": "production",\n    "severity": "CRITICAL"\n  },\n  "created_at": "2021-12-10T10:38:22.364353Z",\n  "updated_at": "2021-12-10T10:38:22.364353Z"\n}\n')),(0,a.kt)("p",null,"The above means whenever any alert which has labels matching the labels\n",(0,a.kt)("inlineCode",{parentName:"p"},'"environment": "production", "severity": "CRITICAL"'),", send this alert to two medium defined by receivers with id: ",(0,a.kt)("inlineCode",{parentName:"p"},"2")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),". Assuming the receivers id ",(0,a.kt)("inlineCode",{parentName:"p"},"2")," to be of Pagerduty type, a PD call will be invoked and assuming the receiver with id ",(0,a.kt)("inlineCode",{parentName:"p"},"1")," to be slack type, a message will be sent to the channel #siren-dev-critical."),(0,a.kt)("h2",{id:"api-interface"},"API Interface"),(0,a.kt)("h3",{id:"create-a-subscription"},"Create a subscription"),(0,a.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren subscription create --file subscription.yaml\n"))),(0,a.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",f,"/",h,'/subscriptions\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "urn": "siren-dev-prod-critical",\n    "receivers": [\n        {\n            "id": "1",\n            "configuration": {\n                "channel_name": "siren-dev-critical"\n            }\n        },\n        {\n            "id": "2"\n        }\n    ],\n    "match": {\n        "severity": "CRITICAL",\n        "environment": "production"\n    },\n    "namespace": "10"\n}\''))),(0,a.kt)("h3",{id:"update-a-subscription"},"Update a subscription"),(0,a.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren subscription edit --id 10 --file subscription.yaml\n"))),(0,a.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request PUT\n  --url ",f,"/",h,'/subscriptions/10\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "urn": "siren-dev-prod-critical",\n    "receivers": [\n        {\n            "id": "1",\n            "configuration": {\n                "channel_name": "siren-dev-critical"\n            }\n        },\n        {\n            "id": "2"\n        }\n    ],\n    "match": {\n        "severity": "CRITICAL",\n        "environment": "production"\n    },\n    "namespace": "10"\n}\''))),(0,a.kt)("h3",{id:"get-all-subscriptions"},"Get all subscriptions"),(0,a.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren subscription list\n"))),(0,a.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request GET\n  --url ",f,"/",h,"/subscriptions"))),(0,a.kt)("h3",{id:"get-a-subscriptions"},"Get a subscriptions"),(0,a.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren subscription view 10\n"))),(0,a.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request GET\n  --url ",f,"/",h,"/subscriptions/10"))),(0,a.kt)("h3",{id:"delete-subscriptions"},"Delete subscriptions"),(0,a.kt)(o.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren subscription delete 10\n"))),(0,a.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request DELETE\n  --url ",f,"/",h,"/subscriptions/10"))))}y.isMDXComponent=!0},3618:function(e,t,n){"use strict";n.r(t);t.default={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}},7694:function(e,t,n){"use strict";n.r(t);t.default={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]}}}]);