(self.webpackChunksiren=self.webpackChunksiren||[]).push([[7580],{1410:function(e,t,r){var n=r(7694),a=r(3618);e.exports={title:"Siren",tagline:"Universal data observability toolkit",url:"https://odpf.github.io",baseUrl:"/siren/",onBrokenLinks:"throw",onBrokenMarkdownLinks:"warn",favicon:"img/favicon.ico",organizationName:"odpf",projectName:"siren",customFields:{apiVersion:"v1beta1",defaultHost:"http://localhost:8080"},themeConfig:{colorMode:{defaultMode:"light",respectPrefersColorScheme:!0,switchConfig:{darkIcon:"\u263e",lightIcon:"\u2600\ufe0f"}},navbar:{title:"Siren",logo:{src:"img/logo.svg"},items:[{type:"doc",docId:"introduction",position:"left",label:"Docs"},{to:"/blog",label:"Blog",position:"left"},{to:"/help",label:"Help",position:"left"},{href:"https://bit.ly/2RzPbtn",position:"right",className:"header-slack-link"},{href:"https://github.com/odpf/siren",className:"navbar-item-github",position:"right"}]},footer:{style:"light",links:[{title:"Products",items:[{label:"Meteor",href:"https://github.com/odpf/meteor"},{label:"Firehose",href:"https://github.com/odpf/firehose"},{label:"Raccoon",href:"https://github.com/odpf/raccoon"},{label:"Dagger",href:"https://odpf.github.io/dagger/"}]},{title:"Resources",items:[{label:"Docs",to:"/docs/introduction"},{label:"Blog",to:"/blog"},{label:"Help",to:"/help"}]},{title:"Community",items:[{label:"Slack",href:"https://bit.ly/2RzPbtn"},{label:"GitHub",href:"https://github.com/odpf/siren"}]}],copyright:"Copyright \xa9 2022-"+(new Date).getFullYear()+" ODPF"},prism:{theme:n,darkTheme:a},gtag:{trackingID:"G-XXX"},announcementBar:{id:"star-repo",content:'\u2b50\ufe0f If you like Siren, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/odpf/siren">GitHub</a>! \u2b50',backgroundColor:"#222",textColor:"#eee",isCloseable:!0}},presets:[["@docusaurus/preset-classic",{docs:{showLastUpdateAuthor:!0,showLastUpdateTime:!0,sidebarPath:6679,editUrl:"https://github.com/odpf/siren/edit/master/docs/"},blog:{showReadingTime:!0,editUrl:"https://github.com/odpf/siren/edit/master/docs/blog/"},theme:{customCss:[5308,2295]}}]]}},8215:function(e,t,r){"use strict";var n=r(7294);t.Z=function(e){var t=e.children,r=e.hidden,a=e.className;return n.createElement("div",{role:"tabpanel",hidden:r,className:a},t)}},5064:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(7294),a=r(9443);var o=function(){var e=(0,n.useContext)(a.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=r(6010),i="tabItem_vU9c",l="tabItemActive_cw6a";var c=function(e){var t,r=e.lazy,a=e.block,c=e.defaultValue,p=e.values,d=e.groupId,u=e.className,m=n.Children.toArray(e.children),g=null!=p?p:m.map((function(e){return{value:e.props.value,label:e.props.label}})),h=null!=c?c:null==(t=m.find((function(e){return e.props.default})))?void 0:t.props.value,f=o(),b=f.tabGroupChoices,v=f.setTabGroupChoices,y=(0,n.useState)(h),k=y[0],T=y[1],w=[];if(null!=d){var N=b[d];null!=N&&N!==k&&g.some((function(e){return e.value===N}))&&T(N)}var x=function(e){var t=e.currentTarget,r=w.indexOf(t),n=g[r].value;T(n),null!=d&&(v(d,n),setTimeout((function(){var e,r,n,a,o,s,i,c;(e=t.getBoundingClientRect(),r=e.top,n=e.left,a=e.bottom,o=e.right,s=window,i=s.innerHeight,c=s.innerWidth,r>=0&&o<=c&&a<=i&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},C=function(e){var t,r=null;switch(e.key){case"ArrowRight":var n=w.indexOf(e.target)+1;r=w[n]||w[0];break;case"ArrowLeft":var a=w.indexOf(e.target)-1;r=w[a]||w[w.length-1]}null==(t=r)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":a},u)},g.map((function(e){var t=e.value,r=e.label;return n.createElement("li",{role:"tab",tabIndex:k===t?0:-1,"aria-selected":k===t,className:(0,s.Z)("tabs__item",i,{"tabs__item--active":k===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:C,onFocus:x,onClick:x},null!=r?r:t)}))),r?(0,n.cloneElement)(m.filter((function(e){return e.props.value===k}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},m.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==k})}))))}},6679:function(e){e.exports={docsSidebar:["introduction",{type:"category",label:"Tour",items:["tour/introduction","tour/startup_siren_server","tour/registering_provider","tour/registering_receivers","tour/sending_notifications_to_receiver","tour/configuring_provider_alerting_rules","tour/subscribing_notifications"]},{type:"category",label:"Concepts",items:["concepts/overview","concepts/plugin","concepts/schema"]},{type:"category",label:"Guides",items:["guides/overview","guides/provider_and_namespace","guides/receiver","guides/subscription","guides/rule","guides/template","guides/alert_history","guides/notification","guides/deployment"]},{type:"category",label:"Contribute",items:["contribute/contribution","contribute/receiver","contribute/provider","contribute/release"]},{type:"category",label:"Reference",items:["reference/api","reference/server_configuration","reference/client_configuration","reference/receiver","reference/cli"]}]}},8096:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return u},contentTitle:function(){return m},metadata:function(){return g},toc:function(){return h},apiVersion:function(){return f},defaultHost:function(){return b},default:function(){return y}});var n=r(7462),a=r(3366),o=(r(7294),r(3905)),s=r(5064),i=r(8215),l=r(6213),c=r(1410),p=r.n(c),d=["components"],u={},m="2 - Registering Provider and Namespaces",g={unversionedId:"tour/registering_provider",id:"tour/registering_provider",isDocsHomePage:!1,title:"2 - Registering Provider and Namespaces",description:"export const apiVersion = siteConfig.customFields.apiVersion",source:"@site/docs/tour/2_registering_provider.md",sourceDirName:"tour",slug:"/tour/registering_provider",permalink:"/siren/docs/tour/registering_provider",editUrl:"https://github.com/odpf/siren/edit/master/docs/docs/tour/2_registering_provider.md",tags:[],version:"current",lastUpdatedBy:"Ravi Suhag",lastUpdatedAt:1666359878,formattedLastUpdatedAt:"10/21/2022",sidebarPosition:2,frontMatter:{},sidebar:"docsSidebar",previous:{title:"1 - Starting-up Siren Server",permalink:"/siren/docs/tour/startup_siren_server"},next:{title:"3 - Registering Receivers",permalink:"/siren/docs/tour/registering_receivers"}},h=[{value:"1. Register the provider",id:"1-register-the-provider",children:[]},{value:"2. Register namespaces",id:"2-register-namespaces",children:[]},{value:"3. Verify Created Providers and Namespaces",id:"3-verify-created-providers-and-namespaces",children:[]}],f=p().customFields.apiVersion,b=p().customFields.defaultHost,v={toc:h,apiVersion:f};function y(e){var t=e.components,r=(0,a.Z)(e,d);return(0,o.kt)("wrapper",(0,n.Z)({},v,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"2---registering-provider-and-namespaces"},"2 - Registering Provider and Namespaces"),(0,o.kt)("h2",{id:"1-register-the-provider"},"1. Register the provider"),(0,o.kt)("p",null,"The first things we need to set up before we add receivers and testing alerts and notifications are we need to register our ",(0,o.kt)("a",{parentName:"p",href:"https://cortexmetrics.io/"},"Cortexmetrics")," as provider and its namespaces."),(0,o.kt)("p",null,"Siren provides HTTP API where we need to send a request to ",(0,o.kt)("inlineCode",{parentName:"p"},"POST /v1beta1/providers")," with a json body to create a provider. Beside that, Siren also has a CLI that interacts to Siren server and we could use it."),(0,o.kt)("p",null,"To create a new provider with CLI, we need to create a ",(0,o.kt)("inlineCode",{parentName:"p"},"yaml")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"# input.yaml\nhost: http://localhost:9009\nurn: localhost-dev-cortex\nname: dev-cortex\ntype: cortex\n")),(0,o.kt)("p",null,"If you are in unix system, you could do this"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<EOT >> input.yaml\nhost: http://localhost:9009\nurn: localhost-dev-cortex\nname: dev-cortex\ntype: cortex\nEOT\n")),(0,o.kt)("p",null,"Once the file is ready, we can start creating the provider."),(0,o.kt)(s.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"siren provider create --file input.yaml\n")),(0,o.kt)("p",null,"If succeed, you will got this message."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"Provider created with id: 1 \u2713\n"))),(0,o.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",b,"/",f,'/providers\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "host": "http://localhost:9009",\n    "urn": "localhost-dev-cortex",\n    "name": "dev-cortex",\n    "type": "cortex"\n}\''))),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," we got from the provider creation is important to create a namespace later."),(0,o.kt)("h2",{id:"2-register-namespaces"},"2. Register namespaces"),(0,o.kt)("p",null,"For multi-tenancy scenario, which Cortex supports, we need to define namespaces in Siren. Assuming there are 2 tenants in Cortex, ",(0,o.kt)("inlineCode",{parentName:"p"},"odpf")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"non-odpf"),", we need to create 2 namespaces. This could be done similar with how we created provider."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<EOT >> ns1.yaml\nurn: odpf-ns\nname: odpf-ns\nprovider:\n    id: 1\nEOT\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<EOT >> ns2.yaml\nurn: non-odpf-ns\nname: non-odpf-ns\nprovider:\n    id: 1\nEOT\n")),(0,o.kt)(s.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./siren namespace create -f ns1.yaml\n"))),(0,o.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",b,"/",f,'/namespaces\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "urn": "odpf-ns",\n    "name": "odpf-ns",\n    "provider": {\n        "id": 1\n    }\n}\''))),(0,o.kt)(s.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./siren namespace create -f ns2.yaml\n"))),(0,o.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",b,"/",f,'/namespaces\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "urn": "non-odpf-ns",\n    "name": "non-odpf-ns",\n    "provider": {\n        "id": 2\n    }\n}\''))),(0,o.kt)("h2",{id:"3-verify-created-providers-and-namespaces"},"3. Verify Created Providers and Namespaces"),(0,o.kt)("p",null,"To make sure all providers and namespaces are properly created, we could try query Siren with Siren CLI."),(0,o.kt)("p",null,"See what providers exist in Siren."),(0,o.kt)(s.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./siren provider list\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"Showing 2 of 2 providers\n \nID      TYPE    URN                     NAME       \n1       cortex  localhost-dev-cortex    dev-cortex\n\nFor details on a provider, try: siren provider view <id>\n"))),(0,o.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request GET\n  --url ",b,"/",f,"/providers'"))),(0,o.kt)("p",null,"See what namespaces exist in Siren."),(0,o.kt)(s.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./siren namespace list\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"Showing 2 of 2 namespaces\n \nID      URN             NAME       \n1       odpf-ns         odpf-ns    \n2       non-odpf-ns     non-odpf-ns\n\nFor details on a namespace, try: siren namespace view <id>\n"))),(0,o.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)(l.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request GET\n  --url ",b,"/",f,"/namespaces'"))))}y.isMDXComponent=!0},3618:function(e,t,r){"use strict";r.r(t);t.default={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}},7694:function(e,t,r){"use strict";r.r(t);t.default={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]}}}]);