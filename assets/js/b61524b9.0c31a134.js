(self.webpackChunksiren=self.webpackChunksiren||[]).push([[484],{1410:function(e,t,n){const r=n(7694),a=n(3618);e.exports={title:"Siren",tagline:"Universal data observability toolkit",url:"https://odpf.github.io",baseUrl:"/siren/",onBrokenLinks:"throw",onBrokenMarkdownLinks:"warn",favicon:"img/favicon.ico",organizationName:"odpf",projectName:"siren",customFields:{apiVersion:"v1beta1",defaultHost:"http://localhost:8080"},presets:[["@docusaurus/preset-classic",{docs:{sidebarPath:6679,editUrl:"https://github.com/odpf/siren/edit/master/docs/",sidebarCollapsed:!0,breadcrumbs:!1},blog:!1,theme:{customCss:[5308,2295]},gtag:{trackingID:"G-EPXDLH6V72"}}]],themeConfig:{colorMode:{defaultMode:"light",respectPrefersColorScheme:!0},navbar:{title:"Siren",logo:{src:"img/logo.svg"},hideOnScroll:!0,items:[{type:"doc",docId:"introduction",position:"right",label:"Docs"},{to:"docs/support",label:"Support",position:"right"},{href:"https://bit.ly/2RzPbtn",position:"right",className:"header-slack-link"},{href:"https://github.com/odpf/siren",className:"navbar-item-github",position:"right"}]},footer:{style:"light",links:[]},prism:{theme:r,darkTheme:a},announcementBar:{id:"star-repo",content:'\u2b50\ufe0f If you like Siren, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/odpf/siren">GitHub</a>! \u2b50',backgroundColor:"#222",textColor:"#eee",isCloseable:!0}}}},5162:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7294),a=n(4334),i="tabItem_Ymn6";function o(e){let{children:t,hidden:n,className:o}=e;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(i,o),hidden:n},t)}},5488:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(3117),a=n(7294),i=n(4334),o=n(2389),s=n(7392),l=n(7094),c=n(2466),u="tabList__CuJ",d="tabItem_LNqP";function p(e){var t;const{lazy:n,block:o,defaultValue:p,values:m,groupId:f,className:g}=e,v=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),h=m??v.map((e=>{let{props:{value:t,label:n,attributes:r}}=e;return{value:t,label:n,attributes:r}})),b=(0,s.l)(h,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===p?p:p??(null==(t=v.find((e=>e.props.default)))?void 0:t.props.value)??v[0].props.value;if(null!==y&&!h.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${h.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:k,setTabGroupChoices:_}=(0,l.U)(),[N,T]=(0,a.useState)(y),C=[],{blockElementScrollPositionUntilNextRender:w}=(0,c.o5)();if(null!=f){const e=k[f];null!=e&&e!==N&&h.some((t=>t.value===e))&&T(e)}const I=e=>{const t=e.currentTarget,n=C.indexOf(t),r=h[n].value;r!==N&&(w(t),T(r),null!=f&&_(f,String(r)))},x=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{const t=C.indexOf(e.currentTarget)+1;n=C[t]??C[0];break}case"ArrowLeft":{const t=C.indexOf(e.currentTarget)-1;n=C[t]??C[C.length-1];break}}null==(t=n)||t.focus()};return a.createElement("div",{className:(0,i.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":o},g)},h.map((e=>{let{value:t,label:n,attributes:o}=e;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>C.push(e),onKeyDown:x,onFocus:I,onClick:I},o,{className:(0,i.Z)("tabs__item",d,null==o?void 0:o.className,{"tabs__item--active":N===t})}),n??t)}))),n?(0,a.cloneElement)(v.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},v.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function m(e){const t=(0,o.Z)();return a.createElement(p,(0,r.Z)({key:String(t)},e))}},6679:function(e){e.exports={docsSidebar:["introduction",{type:"category",label:"Tour",items:["tour/introduction","tour/startup_siren_server","tour/registering_provider","tour/registering_receivers","tour/sending_notifications_to_receiver","tour/configuring_provider_alerting_rules","tour/subscribing_notifications"]},{type:"category",label:"Concepts",items:["concepts/overview","concepts/plugin","concepts/schema"]},{type:"category",label:"Guides",items:["guides/overview","guides/provider_and_namespace","guides/receiver","guides/subscription","guides/rule","guides/template","guides/alert_history","guides/notification","guides/deployment"]},{type:"category",label:"Contribute",items:["contribute/contribution","contribute/receiver","contribute/provider","contribute/release"]},{type:"category",label:"Reference",items:["reference/api","reference/server_configuration","reference/client_configuration","reference/receiver","reference/cli"]}]}},9046:function(e,t,n){"use strict";n.r(t),n.d(t,{apiVersion:function(){return g},assets:function(){return m},contentTitle:function(){return d},default:function(){return b},defaultHost:function(){return v},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return f}});var r=n(3117),a=(n(7294),n(3905)),i=n(5488),o=n(5162),s=n(6066),l=n(1410),c=n.n(l);const u={},d="4 - Sending Notification to Receiver",p={unversionedId:"tour/sending_notifications_to_receiver",id:"tour/sending_notifications_to_receiver",title:"4 - Sending Notification to Receiver",description:"In previous part, we have already registered several receivers and got back the receiver IDs. We could send a notification to the receivers with /receivers/:receiverId/send API. We can use Siren CLI to do this.",source:"@site/docs/tour/4_sending_notifications_to_receiver.md",sourceDirName:"tour",slug:"/tour/sending_notifications_to_receiver",permalink:"/siren/docs/tour/sending_notifications_to_receiver",draft:!1,editUrl:"https://github.com/odpf/siren/edit/master/docs/docs/tour/4_sending_notifications_to_receiver.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"docsSidebar",previous:{title:"3 - Registering Receivers",permalink:"/siren/docs/tour/registering_receivers"},next:{title:"5 - Configuring Provider Alerting Rules",permalink:"/siren/docs/tour/configuring_provider_alerting_rules"}},m={},f=[],g=c().customFields.apiVersion,v=c().customFields.defaultHost,h={toc:f,apiVersion:g};function b(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"4---sending-notification-to-receiver"},"4 - Sending Notification to Receiver"),(0,a.kt)("p",null,"In previous ",(0,a.kt)("a",{parentName:"p",href:"/siren/docs/tour/registering_receivers"},"part"),", we have already registered several receivers and got back the receiver IDs. We could send a notification to the receivers with ",(0,a.kt)("inlineCode",{parentName:"p"},"/receivers/:receiverId/send")," API. We can use Siren CLI to do this."),(0,a.kt)("p",null,"We need to prepare the message payload as yaml to be sent by Siren CLI. The message is expected to be placed under ",(0,a.kt)("inlineCode",{parentName:"p"},"payload.data"),"."),(0,a.kt)("p",null,"Prepare a message to send to receiver 1."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<EOT >> message_file_1.yaml\npayload:\n    data:\n        text: this is notification to file 1\n        a_field: a_value\n        another_field: another_value\nEOT\n")),(0,a.kt)("p",null,"Then we can run ",(0,a.kt)("inlineCode",{parentName:"p"},"receiver send")," command and target the receiver id ",(0,a.kt)("inlineCode",{parentName:"p"},"1")," with flag ",(0,a.kt)("inlineCode",{parentName:"p"},"--id"),"."),(0,a.kt)(i.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"./siren receiver send --id 1 -f message_file_1.yaml\n"))),(0,a.kt)(o.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(s.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",v,"/",g,'/receivers/1/send\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "payload": {\n        "data": {\n            "text": "this is notification to file 1",\n            "a_field": "a_value",\n            "another_field": "another_value"\n        }\n    }\n}\''))),(0,a.kt)("p",null,"Prepare a message to send to receiver 2."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<EOT >> message_file_2.yaml\npayload:\n    data:\n        text: this is notification to file 2\n        a_field: a_value\n        another_field: another_value\nEOT\n")),(0,a.kt)("p",null,"Then we can run ",(0,a.kt)("inlineCode",{parentName:"p"},"receiver send")," command and target the receiver id ",(0,a.kt)("inlineCode",{parentName:"p"},"2")," with flag ",(0,a.kt)("inlineCode",{parentName:"p"},"--id"),"."),(0,a.kt)(i.Z,{groupId:"api",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"./siren receiver send --id 2 -f message_file_2.yaml\n"))),(0,a.kt)(o.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,a.kt)(s.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",v,"/",g,'/receivers/2/send\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "payload": {\n        "data": {\n            "text": "this is notification to file 2",\n            "a_field": "a_value",\n            "another_field": "another_value"\n        }\n    }\n}\''))),(0,a.kt)("p",null,"If succeed, two new files have been created: ",(0,a.kt)("inlineCode",{parentName:"p"},"out-file-sink1.json")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"out-file-sink2.json"),". Each file will have this content:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'// out-file-sink1.json\n{"a_field":"a_value","another_field":"another_value","routing_method":"receiver","text":"this is notification to file 1"}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'// out-file-sink2.json\n{"a_field":"a_value","another_field":"another_value","routing_method":"receiver","text":"this is notification to file 2"}\n')))}b.isMDXComponent=!0},3618:function(e,t,n){"use strict";n.r(t);t.default={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}},7694:function(e,t,n){"use strict";n.r(t);t.default={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]}}}]);