"use strict";(self.webpackChunksiren=self.webpackChunksiren||[]).push([[771],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,g=m["".concat(s,".").concat(u)]||m[u]||c[u]||l;return n?a.createElement(g,i(i({ref:t},d),{},{components:n})):a.createElement(g,i({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2269:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return d},default:function(){return m}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),i=["components"],o={},s="Providers",p={unversionedId:"guides/providers",id:"guides/providers",isDocsHomePage:!1,title:"Providers",description:"Siren providers represent a monitoring server. We define alerts and alerts routing configuration inside providers. For",source:"@site/docs/guides/providers.md",sourceDirName:"guides",slug:"/guides/providers",permalink:"/siren/docs/guides/providers",editUrl:"https://github.com/odpf/siren/edit/master/docs/docs/guides/providers.md",tags:[],version:"current",lastUpdatedBy:"Abduh",lastUpdatedAt:1655782047,formattedLastUpdatedAt:"6/21/2022",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Usage",permalink:"/siren/docs/guides/overview"},next:{title:"Receivers",permalink:"/siren/docs/guides/receivers"}},d=[{value:"Providers API interface",id:"providers-api-interface",children:[{value:"Providers creation",id:"providers-creation",children:[]},{value:"Providers update",id:"providers-update",children:[]},{value:"Getting a provider",id:"getting-a-provider",children:[]},{value:"Getting all providers",id:"getting-all-providers",children:[]},{value:"Deleting a provider",id:"deleting-a-provider",children:[]}]},{value:"Namespace API interface",id:"namespace-api-interface",children:[{value:"Creating a namespace",id:"creating-a-namespace",children:[]},{value:"Updating a namespace",id:"updating-a-namespace",children:[]},{value:"Getting a namespace",id:"getting-a-namespace",children:[]},{value:"Getting all namespace",id:"getting-all-namespace",children:[]},{value:"Deleting a namespace",id:"deleting-a-namespace",children:[]}]},{value:"Provider CLI interface",id:"provider-cli-interface",children:[{value:"Provider create",id:"provider-create",children:[]}]},{value:"Namespace CLI interface",id:"namespace-cli-interface",children:[]}],c={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"providers"},"Providers"),(0,l.kt)("p",null,"Siren providers represent a monitoring server. We define alerts and alerts routing configuration inside providers. For\nexample the below provider, describes how a cortex monitoring server info is stored inside Siren."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "3",\n  "host": "http://localhost:9009",\n  "urn": "localhost_cortex",\n  "name": "localhost_cortex",\n  "type": "cortex",\n  "credentials": {},\n  "created_at": "2021-10-26T06:00:52.627917Z",\n  "updated_at": "2021-10-26T06:00:52.627917Z"\n}\n')),(0,l.kt)("h1",{id:"namespaces"},"Namespaces"),(0,l.kt)("p",null,"Monitoring providers usually have tenants, a sharded way of storing and querying telemetry data. Siren calls them",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("strong",{parentName:"p"},"namespaces"),'. You should create a namespaces with the same name as the tenant of your monitoring providers. Example:\nthe below namespace represent the tenant "odpf".'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "10",\n  "urn": "odpf",\n  "name": "odpf",\n  "provider": "3",\n  "credentials": {},\n  "created_at": "2021-10-26T06:00:52.627917Z",\n  "updated_at": "2021-10-26T06:00:52.627917Z"\n}\n')),(0,l.kt)("h1",{id:"api-interface"},"API Interface"),(0,l.kt)("h2",{id:"providers-api-interface"},"Providers API interface"),(0,l.kt)("h3",{id:"providers-creation"},"Providers creation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'POST /v1beta1/providers HTTP/1.1\nHost: localhost:3000\nContent-Type: application/json\nContent-Length: 154\n\n{\n  "host": "http://localhost:9009",\n  "urn": "localhost_cortex",\n  "name": "localhost_cortex",\n  "type": "cortex",\n  "credentials": {},\n  "labels": {}\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Terminology of the request body")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Term"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Example"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"host"),(0,l.kt)("td",{parentName:"tr",align:null},"Fully qualified path for the provider"),(0,l.kt)("td",{parentName:"tr",align:null},"http://localhost:9009")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"urn"),(0,l.kt)("td",{parentName:"tr",align:null},"Unique name for this provider (uneditable)"),(0,l.kt)("td",{parentName:"tr",align:null},"localhost_cortex")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"Name of the proider (editable)"),(0,l.kt)("td",{parentName:"tr",align:null},"localhost_cortex")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"type"),(0,l.kt)("td",{parentName:"tr",align:null},"type of the provider(cortex/influx etc.)"),(0,l.kt)("td",{parentName:"tr",align:null},"cortex")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"credentials"),(0,l.kt)("td",{parentName:"tr",align:null},"key value pair to be used for authentication with the host"),(0,l.kt)("td",{parentName:"tr",align:null},'{"bearer_token":"x2y4rd5"}')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"labels"),(0,l.kt)("td",{parentName:"tr",align:null},"key value pair that can be used as label selector"),(0,l.kt)("td",{parentName:"tr",align:null},'{"environment":"dev"}')))),(0,l.kt)("p",null,"The response body will look like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "1",\n  "host": "http://localhost:9009",\n  "urn": "localhost_cortex",\n  "name": "localhost_cortex",\n  "type": "cortex",\n  "credentials": {},\n  "created_at": "2022-01-03T05:10:47.880209Z",\n  "updated_at": "2022-01-03T05:10:47.880209Z"\n}\n')),(0,l.kt)("h3",{id:"providers-update"},"Providers update"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'PUT /v1beta1/providers/4 HTTP/1.1\nHost: localhost:3000\nContent-Type: application/json\nContent-Length: 155\n\n{\n  "host": "http://localhost:9009",\n  "urn": "localhost_cortex",\n  "name": "localhost_cortex_1",\n  "type": "cortex",\n  "credentials": {},\n  "labels": {}\n}\n')),(0,l.kt)("h3",{id:"getting-a-provider"},"Getting a provider"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"GET /v1beta1/providers/4 HTTP/1.1\nHost: localhost:3000\n")),(0,l.kt)("h3",{id:"getting-all-providers"},"Getting all providers"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"GET /v1beta1/providers HTTP/1.1\nHost: localhost:3000\n")),(0,l.kt)("h3",{id:"deleting-a-provider"},"Deleting a provider"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"DELETE /v1beta1/providers/4 HTTP/1.1\nHost: localhost:3000\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note:")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Before deleting the provider, you will need to delete dependant resources(namespaces).")),(0,l.kt)("h2",{id:"namespace-api-interface"},"Namespace API interface"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note:")," These operations on namespaces inside Siren doesn't affect the actual tenant in the monitoring provider. The\nuser should manage the tenants themselves."),(0,l.kt)("h3",{id:"creating-a-namespace"},"Creating a namespace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'POST /v1beta1/namespaces HTTP/1.1\nHost: localhost:3000\nContent-Type: application/json\nContent-Length: 103\n\n{\n    "name": "test",\n    "urn": "test",\n    "provider": "5",\n    "credentials": {},\n    "labels": {}\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Terminology of the request body")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Term"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Example"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"urn"),(0,l.kt)("td",{parentName:"tr",align:null},"Unique name for this namespace (uneditable)"),(0,l.kt)("td",{parentName:"tr",align:null},"test-tenant")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"Name of the tenant (editable)"),(0,l.kt)("td",{parentName:"tr",align:null},"test-tenant")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"provider"),(0,l.kt)("td",{parentName:"tr",align:null},"id of the provider to which this tenant belongs"),(0,l.kt)("td",{parentName:"tr",align:null},"1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"labels"),(0,l.kt)("td",{parentName:"tr",align:null},"key value pair that can be used as label selector"),(0,l.kt)("td",{parentName:"tr",align:null},'{"environment":"dev"}')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"credentials"),(0,l.kt)("td",{parentName:"tr",align:null},"key value pair to be used for authentication with the host"),(0,l.kt)("td",{parentName:"tr",align:null},'{"bearer_token":"x2y4rd5"}')))),(0,l.kt)("p",null,"The response body will look like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "13",\n  "urn": "test",\n  "name": "test",\n  "provider": "5",\n  "credentials": {},\n  "created_at": "2022-01-03T07:06:30.884113Z",\n  "updated_at": "2022-01-03T07:06:30.884113Z"\n}\n')),(0,l.kt)("h3",{id:"updating-a-namespace"},"Updating a namespace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'PUT /v1beta1/namespaces/13 HTTP/1.1\nHost: localhost:3000\nContent-Type: application/json\nContent-Length: 104\n\n{\n    "name": "test2",\n    "urn": "test",\n    "provider": "5",\n    "credentials": {},\n    "labels": {}\n}\n')),(0,l.kt)("h3",{id:"getting-a-namespace"},"Getting a namespace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"GET /v1beta1/namespaces/13 HTTP/1.1\nHost: localhost:3000\n")),(0,l.kt)("h3",{id:"getting-all-namespace"},"Getting all namespace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"GET /v1beta1/namespaces HTTP/1.1\nHost: localhost:3000\n")),(0,l.kt)("h3",{id:"deleting-a-namespace"},"Deleting a namespace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"GET /v1beta1/namespaces/13 HTTP/1.1\nHost: localhost:3000\n")),(0,l.kt)("h1",{id:"cli-interface"},"CLI Interface"),(0,l.kt)("h2",{id:"provider-cli-interface"},"Provider CLI interface"),(0,l.kt)("p",null,"With CLI, you will need a YAML file in the below specified format to create/update providers."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example usage")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'Work with providers.\n\nProviders are the system for which we intend to mange monitoring and alerting.\n\nUsage:\n  siren provider [command]\n\nAliases:\n  provider, providers\n\nAvailable Commands:\n  create      Create a new provider\n  delete      Delete a provider details\n  edit        Edit a provider\n  list        List providers\n  view        View a provider details\n\nFlags:\n  -h, --help   help for provider\n\nUse "siren provider [command] --help" for more information about a command.\n')),(0,l.kt)("h3",{id:"provider-create"},"Provider create"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"# input.yaml\nhost: http://localhost:9009\nurn: localhost-dev-cortex\nname: dev-cortex\ntype: cortex\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"go run main.go providers create --file test.yam\n")),(0,l.kt)("h2",{id:"namespace-cli-interface"},"Namespace CLI interface"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'Work with namespaces.\n\nnamespaces are used for multi-tenancy for a given provider.\n\nUsage:\n  siren namespace [command]\n\nAliases:\n  namespace, namespaces\n\nAvailable Commands:\xd2\n  create      Create a new namespace\n  delete      Delete a namespace details\n  edit        Edit a namespace\n  list        List namespaces\n  view        View a namespace details\n\nFlags:\n  -h, --help   help for namespace\n\nUse "siren namespace [command] --help" for more information about a command.\n')),(0,l.kt)("p",null,"The usage is same as providers."))}m.isMDXComponent=!0}}]);