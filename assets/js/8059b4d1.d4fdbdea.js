(self.webpackChunksiren=self.webpackChunksiren||[]).push([[618],{1410:(e,t,a)=>{const n=a(7694),r=a(3618);e.exports={title:"Siren",tagline:"Universal data observability toolkit",url:"https://goto.github.io",baseUrl:"/siren/",onBrokenLinks:"throw",onBrokenMarkdownLinks:"warn",favicon:"img/favicon.ico",organizationName:"goto",projectName:"siren",customFields:{apiVersion:"v1beta1",defaultHost:"http://localhost:8080"},presets:[["@docusaurus/preset-classic",{docs:{sidebarPath:6679,editUrl:"https://github.com/goto/siren/edit/master/docs/",sidebarCollapsed:!0,breadcrumbs:!1},blog:!1,theme:{customCss:[5308,2295]},gtag:{trackingID:"G-EPXDLH6V72"}}]],themeConfig:{colorMode:{defaultMode:"light",respectPrefersColorScheme:!0},navbar:{title:"Siren",logo:{src:"img/logo.svg"},hideOnScroll:!0,items:[{type:"doc",docId:"introduction",position:"right",label:"Docs"},{to:"docs/support",label:"Support",position:"right"},{href:"https://bit.ly/2RzPbtn",position:"right",className:"header-slack-link"},{href:"https://github.com/goto/siren",className:"navbar-item-github",position:"right"}]},footer:{style:"light",links:[]},prism:{theme:n,darkTheme:r},announcementBar:{id:"star-repo",content:'\u2b50\ufe0f If you like Siren, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/goto/siren">GitHub</a>! \u2b50',backgroundColor:"#222",textColor:"#eee",isCloseable:!0}}}},5162:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(7294),r=a(4334);const l="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(l,i),hidden:a},t)}},5488:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(3117),r=a(7294),l=a(4334),i=a(2389),o=a(7392),s=a(7094),p=a(2466);const u="tabList__CuJ",d="tabItem_LNqP";function m(e){var t;const{lazy:a,block:i,defaultValue:m,values:c,groupId:g,className:b}=e,h=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=c??h.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),f=(0,o.l)(k,((e,t)=>e.value===t.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===m?m:m??(null==(t=h.find((e=>e.props.default)))?void 0:t.props.value)??h[0].props.value;if(null!==y&&!k.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:N}=(0,s.U)(),[C,w]=(0,r.useState)(y),T=[],{blockElementScrollPositionUntilNextRender:x}=(0,p.o5)();if(null!=g){const e=v[g];null!=e&&e!==C&&k.some((t=>t.value===e))&&w(e)}const I=e=>{const t=e.currentTarget,a=T.indexOf(t),n=k[a].value;n!==C&&(x(t),w(n),null!=g&&N(g,String(n)))},P=e=>{var t;let a=null;switch(e.key){case"Enter":I(e);break;case"ArrowRight":{const t=T.indexOf(e.currentTarget)+1;a=T[t]??T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=T[t]??T[T.length-1];break}}null==(t=a)||t.focus()};return r.createElement("div",{className:(0,l.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":i},b)},k.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:C===t?0:-1,"aria-selected":C===t,key:t,ref:e=>T.push(e),onKeyDown:P,onClick:I},i,{className:(0,l.Z)("tabs__item",d,null==i?void 0:i.className,{"tabs__item--active":C===t})}),a??t)}))),a?(0,r.cloneElement)(h.filter((e=>e.props.value===C))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==C})))))}function c(e){const t=(0,i.Z)();return r.createElement(m,(0,n.Z)({key:String(t)},e))}},6679:e=>{e.exports={docsSidebar:["introduction","use_cases","installation",{type:"category",label:"Tour",items:["tour/introduction","tour/setup_server","tour/1sending_notifications_overview","tour/2alerting_rules_subscriptions_overview"]},{type:"category",label:"Concepts",items:["concepts/overview","concepts/plugin","concepts/notification","concepts/glossary"]},{type:"category",label:"Guides",items:["guides/overview","guides/deployment","guides/provider_and_namespace","guides/receiver","guides/subscription","guides/rule","guides/template","guides/alert_history","guides/notification","guides/workers","guides/job"]},{type:"category",label:"Providers",items:["providers/cortexmetrics"]},{type:"category",label:"Receivers",items:["receivers/slack","receivers/pagerduty","receivers/http","receivers/file"]},{type:"category",label:"Reference",items:["reference/api","reference/server_configuration","reference/client_configuration","reference/cli"]},{type:"category",label:"Extend",items:["extend/adding_new_provider","extend/adding_new_receiver"]},{type:"category",label:"Contribute",items:["contribute/contribution","contribute/release"]}]}},2326:(e,t,a)=>{"use strict";a.r(t),a.d(t,{apiVersion:()=>b,assets:()=>c,contentTitle:()=>d,default:()=>f,defaultHost:()=>h,frontMatter:()=>u,metadata:()=>m,toc:()=>g});var n=a(3117),r=(a(7294),a(3905)),l=a(5488),i=a(5162),o=a(6066),s=a(1410),p=a.n(s);const u={},d="Rule",m={unversionedId:"guides/rule",id:"guides/rule",title:"Rule",description:"Siren rules are generated from predefined templates by providing values of the variables of the template.",source:"@site/docs/guides/rule.md",sourceDirName:"guides",slug:"/guides/rule",permalink:"/siren/docs/guides/rule",draft:!1,editUrl:"https://github.com/goto/siren/edit/master/docs/docs/guides/rule.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Subscription",permalink:"/siren/docs/guides/subscription"},next:{title:"Template",permalink:"/siren/docs/guides/template"}},c={},g=[{value:"API interface",id:"api-interface",level:2},{value:"Creating/Updating a rule",id:"creatingupdating-a-rule",level:3},{value:"Terminology of the request body",id:"terminology-of-the-request-body",level:3},{value:"CLI Interface",id:"cli-interface",level:2},{value:"Terminology",id:"terminology",level:3},{value:"Managing Templates via YAML File",id:"managing-templates-via-yaml-file",level:2},{value:"Managing Rules via YAML File",id:"managing-rules-via-yaml-file",level:2},{value:"Use Case: CI",id:"use-case-ci",level:2}],b=p().customFields.apiVersion,h=p().customFields.defaultHost,k={toc:g,apiVersion:b};function f(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"rule"},"Rule"),(0,r.kt)("p",null,"Siren rules are generated from predefined ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/guides/template"},"templates")," by providing values of the variables of the template."),(0,r.kt)("p",null,"One can create templates using either HTTP APIs or CLI."),(0,r.kt)("h2",{id:"api-interface"},"API interface"),(0,r.kt)("p",null,"A rule is uniquely identified with the combination of provider's namespace (uniquely identifies which provider and namespace), template name, optional namespace, optional group name."),(0,r.kt)("p",null,"One can choose any namespace and group name. In Cortex terminology, namespace is a collection of groups. Groups can have\none or more rules."),(0,r.kt)("h3",{id:"creatingupdating-a-rule"},"Creating/Updating a rule"),(0,r.kt)("p",null,"The below snippet describes an example of rule creation/update. Same API can be used to enable or disable alerts."),(0,r.kt)(l.Z,{groupId:"api",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren rule create --file rule.yaml\n"))),(0,r.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)(o.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request PUT\n  --url ",h,"/",b,'/rules\n  --header \'content-type: application/json\'\n  --data-raw \'{\n  "namespace": "gotocompany",\n  "group_name": "CPUHigh",\n  "template": "CPU",\n  "providerNamespace": "3"\n  "variables": [\n    {\n      "name": "for",\n      "value": "15m",\n      "type": "string"\n    },\n     {\n      "name": "team",\n      "value": "gotocompany",\n      "type": "string"\n    }\n  ],\n  "enabled": true,\n}\''))),(0,r.kt)("p",null,'Here we are using CPU template and providing value for few variables("for", "team"). In case some variables value is not\nprovided default will be picked from the template\'s definition.'),(0,r.kt)("h3",{id:"terminology-of-the-request-body"},"Terminology of the request body"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Term"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Example/Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Namespace"),(0,r.kt)("td",{parentName:"tr",align:null},"Corresponds to Cortex namespace in which rule will be created"),(0,r.kt)("td",{parentName:"tr",align:null},"kafka")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Group Name"),(0,r.kt)("td",{parentName:"tr",align:null},"Corresponds to Cortex group name in which rule will be created"),(0,r.kt)("td",{parentName:"tr",align:null},"CPUHigh")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"providerNamespace"),(0,r.kt)("td",{parentName:"tr",align:null},"Corresponds to a tenant in a provider"),(0,r.kt)("td",{parentName:"tr",align:null},"4")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Template"),(0,r.kt)("td",{parentName:"tr",align:null},"what template is used to create the rule"),(0,r.kt)("td",{parentName:"tr",align:null},"CPU")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Variables"),(0,r.kt)("td",{parentName:"tr",align:null},"Value of variables defined inside the template"),(0,r.kt)("td",{parentName:"tr",align:null},"See example above")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"boolean describing if the rule is enabled or not"),(0,r.kt)("td",{parentName:"tr",align:null},"true")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Fetching rules")),(0,r.kt)("p",null,"Rules can be fetched and filtered with multiple parameters. An example of all filters is described below."),(0,r.kt)(l.Z,{groupId:"api",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren rule list --namespace foo --provider-namespace 4 --group-name CPUHigh --template CPU\n"))),(0,r.kt)(i.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)(o.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request GET\n  --url ",h,"/",b,"/rules?namespace=foo&providerNamespace=4&groupName=CPUHigh&template=CPU"))),(0,r.kt)("h2",{id:"cli-interface"},"CLI Interface"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'Work with rules.\n\nrules are used for alerting within a provider.\n\nUsage:\n  siren rule [command]\n\nAliases:\n  rule, rules\n\nAvailable Commands:\n  edit        Edit a rule\n  list        List rules\n  upload      Upload Rules YAML file\n\nFlags:\n  -h, --help   help for rule\n\nUse "siren rule [command] --help" for more information about a command.\n')),(0,r.kt)("p",null,"With CLI, you will need a YAML file in the below specified format to create/edit rules.\n",(0,r.kt)("strong",{parentName:"p"},"Example rule file")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v2\ntype: rule\nnamespace: demo\nprovider: localhost-cortex\nproviderNamespace: test\nrules:\n  TestGroup:\n    template: CPU\n    status: enabled\n    variables:\n      - name: for\n        value: 15m\n      - name: warning\n        value: 185\n      - name: critical\n        value: 195\n")),(0,r.kt)("p",null,"In the above example, we are creating rules\ninside ",(0,r.kt)("inlineCode",{parentName:"p"},"demo")," ",(0,r.kt)("a",{parentName:"p",href:"https://cortexmetrics.io/docs/api/#get-rule-groups-by-namespace"},"namespace"),"\nunder ",(0,r.kt)("inlineCode",{parentName:"p"},"test")," ",(0,r.kt)("a",{parentName:"p",href:"https://cortexmetrics.io/docs/architecture/#the-role-of-prometheus"},"tenant")," of ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost-cortex"),"\nprovider."),(0,r.kt)("p",null,"The rules array defines actual rules defined over the templates. Here ",(0,r.kt)("inlineCode",{parentName:"p"},"TestGroup")," is the name of the group which will be\ncreated/updated with the rule defined by ",(0,r.kt)("inlineCode",{parentName:"p"},"CPU")," template. The example shows the value of variables provided in creating\nrules(alert)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example upload command")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"siren rule upload cpu_rule.yaml\n")),(0,r.kt)("p",null,"The yaml file can be edited and re-uploaded to edit the rule thresholds."),(0,r.kt)("h3",{id:"terminology"},"Terminology"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Term"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Example/Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"API Version"),(0,r.kt)("td",{parentName:"tr",align:null},"Which API to use to parse the YAML file"),(0,r.kt)("td",{parentName:"tr",align:null},"v2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Type"),(0,r.kt)("td",{parentName:"tr",align:null},"Describes the type of object represented by YAML file"),(0,r.kt)("td",{parentName:"tr",align:null},"rule")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Namespace"),(0,r.kt)("td",{parentName:"tr",align:null},"Corresponds to Cortex namespace in which rule will be created"),(0,r.kt)("td",{parentName:"tr",align:null},"kafka")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Entity"),(0,r.kt)("td",{parentName:"tr",align:null},"Corresponds to tenant name in cortex"),(0,r.kt)("td",{parentName:"tr",align:null},"gotocompany")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Rules"),(0,r.kt)("td",{parentName:"tr",align:null},"Map of GroupNames describing what template is used in a particular group"),(0,r.kt)("td",{parentName:"tr",align:null},"See example file")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Variables"),(0,r.kt)("td",{parentName:"tr",align:null},"Value of variables defined inside the template"),(0,r.kt)("td",{parentName:"tr",align:null},"See example above")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"provider"),(0,r.kt)("td",{parentName:"tr",align:null},"URN of monitoring provider to be used"),(0,r.kt)("td",{parentName:"tr",align:null},"localhost-cortex")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"providerNamespace"),(0,r.kt)("td",{parentName:"tr",align:null},"URN of tenant to choose inside the monitoring provider"),(0,r.kt)("td",{parentName:"tr",align:null},"test")))),(0,r.kt)("h2",{id:"managing-templates-via-yaml-file"},"Managing Templates via YAML File"),(0,r.kt)("p",null,"Siren gives flexibility to templatize rules for re-usability purpose. Template can be managed via APIs (REST\nand GRPC). Apart from that, there is a command line interface as well which parses a YAML file in a specified format (as\ndescribed below) and upload to Siren using an HTTP Client of Siren Service. Refer ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/guides/template"},"here")," for\nmore details around usage and terminology."),(0,r.kt)("h2",{id:"managing-rules-via-yaml-file"},"Managing Rules via YAML File"),(0,r.kt)("p",null,"To manage rules in bulk, Siren gives a way to manage rules using YAML files, which you can manage in a version\ncontrolled repository. Using the ",(0,r.kt)("inlineCode",{parentName:"p"},"upload")," command one can upload a rule YAML file in a specified format (as described\nbelow) and upload to Siren using the GRPC Client(comes inbuilt) of Siren Service. Refer ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/guides/rule"},"here")," for\nmore details around usage and terminology."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," Updating a template also updates the associated rules."),(0,r.kt)("h1",{id:"bulk-rule-management"},"Bulk Rule management"),(0,r.kt)("p",null,"For org wide use cases, teams end up managing a lot of rules, often manually. Siren CLI can be used to automate the rule creation, rule update, and ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/guides/template"},"template")," update."),(0,r.kt)("h2",{id:"use-case-ci"},"Use Case: CI"),(0,r.kt)("p",null,"The Siren CLI could further be used in GitOps scenario by putting all the rules and templates YAML files in a version controlled repository and uploading them using CI Jobs. By doing so, you will get speed in managing hundreds and thousands of rules in a reliable and predictable manner."),(0,r.kt)("p",null,"The benefits that one gets via this is:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Predictable state of alerts after each CI job run"),(0,r.kt)("li",{parentName:"ol"},"Easy to rollback if something goes wrong"),(0,r.kt)("li",{parentName:"ol"},"Version controlled alerting state, democratizing alert setup, removing dependency from a central team")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example setup")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a github repo, let's call it ",(0,r.kt)("inlineCode",{parentName:"p"},"rules"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Let's create a directory inside it and call it ",(0,r.kt)("inlineCode",{parentName:"p"},"templates"),". This is where people will put the YAML files of\nTemplates.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Let's create a template names ",(0,r.kt)("inlineCode",{parentName:"p"},"cpu.yaml")," and add the below content"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v2\ntype: template\nname: CPU\nbody:\n  - alert: CPUWarning\n    expr: avg by (host) (cpu_usage_user{cpu="cpu-total"}) > [[.warning]]\n    for: "[[.for]]"\n    labels:\n      severity: WARNING\n    annotations:\n      description: CPU has been above [[.warning]] for last [[.for]] {{ $labels.host }}\n  - alert: CPUCritical\n    expr: avg by (host) (cpu_usage_user{cpu="cpu-total"}) > [[.critical]]\n    for: "[[.for]]"\n    labels:\n      severity: CRITICAL\n    annotations:\n      description: CPU has been above [[.critical]] for last [[.for]] {{ $labels.host }}\nvariables:\n  - name: for\n    type: string\n    default: 10m\n    description: For eg 5m, 2h; Golang duration format\n  - name: warning\n    type: int\n    default: 80\n  - name: critical\n    type: int\n    default: 90\ntags:\n  - systems\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Let's define a shell script which iterates over all files inside ",(0,r.kt)("inlineCode",{parentName:"p"},"templates/")," directory on github to upload templates\nto Siren."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'#!/bin/bash\nset -e\necho "------------------------------------------------------------"\necho "Uploading templates: $DIR"\necho "------------------------------------------------------------"\n\nfor FILE in templates/*; do\n  eval $ siren template upload $FILE\n  echo $\'\\n\'\ndone\n\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Now as the last step we need to run this script using github action. Here we are pulling siren image and using\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"upload")," command to upload the templates to Siren Web service, denoted by ",(0,r.kt)("inlineCode",{parentName:"p"},"SIREN_SERVICE_HOST")," environment\nvariable. An example is:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"// to be filled later\n")),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"For rules, create a directory called ",(0,r.kt)("inlineCode",{parentName:"p"},"rules")," beside ",(0,r.kt)("inlineCode",{parentName:"p"},"templates")," and start define an example rule as given below."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v2\ntype: rule\nnamespace: demo\nprovider: production-cortex\nproviderNamespace: gotocompany\nrules:\n  TestGroup:\n    template: CPU\n    status: enabled\n    variables:\n      - name: for\n        value: 15m\n      - name: warning\n        value: 185\n      - name: critical\n        value: 195\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"We can upload the files inside ",(0,r.kt)("inlineCode",{parentName:"p"},"rules")," directory iteratively. Here is an example script. This can be called in github\nCI action."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'#!/bin/bash\nset -e\necho "------------------------------------------------------------"\necho "Uploading rules: $DIR"\necho "------------------------------------------------------------"\n\nfor FILE in rules/*; do\n  eval $ siren rule upload $FILE\n  echo $\'\\n\'\ndone\n')))))}f.isMDXComponent=!0},3618:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}},7694:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]}}}]);