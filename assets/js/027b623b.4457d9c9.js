"use strict";(self.webpackChunksiren=self.webpackChunksiren||[]).push([[5413],{98581:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>u});var a=s(58168),o=(s(96540),s(15680));const i={},t="Job",r={unversionedId:"guides/job",id:"guides/job",title:"Job",description:"Job is a task that only runs once and then the process is terminated. Job could be scheduled with Cron or triggered manually. Siren is currently only having a one very-specific job.",source:"@site/docs/guides/job.md",sourceDirName:"guides",slug:"/guides/job",permalink:"/siren/docs/guides/job",draft:!1,editUrl:"https://github.com/goto/siren/edit/master/docs/docs/guides/job.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Workers",permalink:"/siren/docs/guides/workers"},next:{title:"CortexMetrics",permalink:"/siren/docs/providers/cortexmetrics"}},l={},u=[{value:"Queue Cleanup Job (Postgres Queue Only)",id:"queue-cleanup-job-postgres-queue-only",level:2}],d={toc:u},c="wrapper";function p(e){let{components:n,...s}=e;return(0,o.yg)(c,(0,a.A)({},d,s,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"job"},"Job"),(0,o.yg)("p",null,"Job is a task that only runs once and then the process is terminated. Job could be scheduled with Cron or triggered manually. Siren is currently only having a one very-specific job."),(0,o.yg)("h2",{id:"queue-cleanup-job-postgres-queue-only"},"Queue Cleanup Job (Postgres Queue Only)"),(0,o.yg)("p",null,"This job requires the same config like server. This job cleans up all stored ",(0,o.yg)("inlineCode",{parentName:"p"},"published")," messages in queue with last updated more than specific threshold (default 7 days) from ",(0,o.yg)("inlineCode",{parentName:"p"},"now()")," and optionally cleaning up all ",(0,o.yg)("inlineCode",{parentName:"p"},"pending")," messages in queue with last updated more than specific threshold (default 7 days) from ",(0,o.yg)("inlineCode",{parentName:"p"},"now()"),"."),(0,o.yg)("p",null,"Run this command to clean up all published messages with age 7 days and more."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"$ siren job run cleanup_queue --config config.yaml\n")),(0,o.yg)("p",null,"Run this command to clean up all published messages with age 7 days and more and clean up all pending messages with age 14 days and more."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"$ siren job run cleanup_queue --pending 336h --config config.yaml\n")))}p.isMDXComponent=!0}}]);