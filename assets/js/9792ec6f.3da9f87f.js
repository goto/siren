(self.webpackChunksiren=self.webpackChunksiren||[]).push([[889],{1410:(e,t,a)=>{const n=a(7694),r=a(3618);e.exports={title:"Siren",tagline:"Universal data observability toolkit",url:"https://goto.github.io",baseUrl:"/siren/",onBrokenLinks:"throw",onBrokenMarkdownLinks:"warn",favicon:"img/favicon.ico",organizationName:"goto",projectName:"siren",customFields:{apiVersion:"v1beta1",defaultHost:"http://localhost:8080"},presets:[["@docusaurus/preset-classic",{docs:{sidebarPath:6679,editUrl:"https://github.com/goto/siren/edit/master/docs/",sidebarCollapsed:!0,breadcrumbs:!1},blog:!1,theme:{customCss:[5308,2295]},gtag:{trackingID:"G-EPXDLH6V72"}}]],themeConfig:{colorMode:{defaultMode:"light",respectPrefersColorScheme:!0},navbar:{title:"Siren",logo:{src:"img/logo.svg"},hideOnScroll:!0,items:[{type:"doc",docId:"introduction",position:"right",label:"Docs"},{to:"docs/support",label:"Support",position:"right"},{href:"https://bit.ly/2RzPbtn",position:"right",className:"header-slack-link"},{href:"https://github.com/goto/siren",className:"navbar-item-github",position:"right"}]},footer:{style:"light",links:[]},prism:{theme:n,darkTheme:r},announcementBar:{id:"star-repo",content:'\u2b50\ufe0f If you like Siren, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/goto/siren">GitHub</a>! \u2b50',backgroundColor:"#222",textColor:"#eee",isCloseable:!0}}}},5162:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(7294),r=a(4334);const i="tabItem_Ymn6";function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(i,l),hidden:a},t)}},5488:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n=a(3117),r=a(7294),i=a(4334),l=a(2389),o=a(7392),s=a(7094),c=a(2466);const d="tabList__CuJ",u="tabItem_LNqP";function p(e){var t;const{lazy:a,block:l,defaultValue:p,values:m,groupId:g,className:b}=e,f=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),h=m??f.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),k=(0,o.l)(h,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===p?p:p??(null==(t=f.find((e=>e.props.default)))?void 0:t.props.value)??f[0].props.value;if(null!==y&&!h.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${h.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:N}=(0,s.U)(),[w,T]=(0,r.useState)(y),x=[],{blockElementScrollPositionUntilNextRender:S}=(0,c.o5)();if(null!=g){const e=v[g];null!=e&&e!==w&&h.some((t=>t.value===e))&&T(e)}const C=e=>{const t=e.currentTarget,a=x.indexOf(t),n=h[a].value;n!==w&&(S(t),T(n),null!=g&&N(g,String(n)))},_=e=>{var t;let a=null;switch(e.key){case"Enter":C(e);break;case"ArrowRight":{const t=x.indexOf(e.currentTarget)+1;a=x[t]??x[0];break}case"ArrowLeft":{const t=x.indexOf(e.currentTarget)-1;a=x[t]??x[x.length-1];break}}null==(t=a)||t.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",d)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":l},b)},h.map((e=>{let{value:t,label:a,attributes:l}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>x.push(e),onKeyDown:_,onClick:C},l,{className:(0,i.Z)("tabs__item",u,null==l?void 0:l.className,{"tabs__item--active":w===t})}),a??t)}))),a?(0,r.cloneElement)(f.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function m(e){const t=(0,l.Z)();return r.createElement(p,(0,n.Z)({key:String(t)},e))}},6679:e=>{e.exports={docsSidebar:["introduction","use_cases","installation",{type:"category",label:"Tour",items:["tour/introduction","tour/setup_server","tour/1sending_notifications_overview","tour/2alerting_rules_subscriptions_overview"]},{type:"category",label:"Concepts",items:["concepts/overview","concepts/plugin","concepts/notification","concepts/glossary"]},{type:"category",label:"Guides",items:["guides/overview","guides/deployment","guides/provider_and_namespace","guides/receiver","guides/subscription","guides/rule","guides/template","guides/alert_history","guides/notification","guides/workers","guides/job"]},{type:"category",label:"Providers",items:["providers/cortexmetrics"]},{type:"category",label:"Receivers",items:["receivers/slack","receivers/pagerduty","receivers/http","receivers/file"]},{type:"category",label:"Reference",items:["reference/api","reference/server_configuration","reference/client_configuration","reference/cli"]},{type:"category",label:"Extend",items:["extend/adding_new_provider","extend/adding_new_receiver"]},{type:"category",label:"Contribute",items:["contribute/contribution","contribute/release"]}]}},629:(e,t,a)=>{"use strict";a.r(t),a.d(t,{apiVersion:()=>b,assets:()=>m,contentTitle:()=>u,default:()=>k,defaultHost:()=>f,frontMatter:()=>d,metadata:()=>p,toc:()=>g});var n=a(3117),r=(a(7294),a(3905)),i=a(5488),l=a(5162),o=a(6066),s=a(1410),c=a.n(s);const d={},u="Notification",p={unversionedId:"guides/notification",id:"guides/notification",title:"Notification",description:"To understand more concepts of notification in Siren, you can visit this page.",source:"@site/docs/guides/notification.md",sourceDirName:"guides",slug:"/guides/notification",permalink:"/siren/docs/guides/notification",draft:!1,editUrl:"https://github.com/goto/siren/edit/master/docs/docs/guides/notification.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Alert History",permalink:"/siren/docs/guides/alert_history"},next:{title:"Workers",permalink:"/siren/docs/guides/workers"}},m={},g=[{value:"Sending a message/notification",id:"sending-a-messagenotification",level:2},{value:"Example: Sending Notification to Slack",id:"example-sending-notification-to-slack",level:3},{value:"Alerts Notification",id:"alerts-notification",level:2}],b=c().customFields.apiVersion,f=c().customFields.defaultHost,h={toc:g,apiVersion:b};function k(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"notification"},"Notification"),(0,r.kt)("p",null,"To understand more concepts of notification in Siren, you can visit this ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/concepts/notification"},"page"),"."),(0,r.kt)("h2",{id:"sending-a-messagenotification"},"Sending a message/notification"),(0,r.kt)("p",null,"We could send a notification with ",(0,r.kt)("inlineCode",{parentName:"p"},"POST /notifications")," API to a specific receiver by passing receiver labels information in the ",(0,r.kt)("inlineCode",{parentName:"p"},"receivers")," field in the body. The payload format needs to follow receiver type contract. "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required?"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receivers"),(0,r.kt)("td",{parentName:"tr",align:null},"list of json"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Selector of receivers using receiver labels ",(0,r.kt)("br",null),"[",(0,r.kt)("br",null)," {",(0,r.kt)("br",null),'   "id": 3,    ',(0,r.kt)("br",null),"  },",(0,r.kt)("br",null)," {",(0,r.kt)("br",null),'   "type": "slack_channel",',(0,r.kt)("br",null),'   "team": "de-infra"',(0,r.kt)("br",null)," },",(0,r.kt)("br",null)," {",(0,r.kt)("br",null),'   "type": "email",',(0,r.kt)("br",null),'   "team": "de-experience" ',(0,r.kt)("br",null)," }",(0,r.kt)("br",null),"]",(0,r.kt)("br",null))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"This will fetch all receivers that have the labels."),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data"),(0,r.kt)("td",{parentName:"tr",align:null},"json"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},"any data that we want to pass to the message. The data will populate the corresponding template or content variables.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"template"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"template name that will be used to populate the message. default template will be used if this value is empty. errors might be thrown if there are errors when parsing template.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"labels"),(0,r.kt)("td",{parentName:"tr",align:null},"json"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},"If populated, labels would be used by subscription matchers to find the subscribers that listen to specific labels. e.g. ",(0,r.kt)("br",null),"{",(0,r.kt)("br",null),'  "team": "de-infra",',(0,r.kt)("br",null),'  "severity": "CRITICAL"',(0,r.kt)("br",null),"}")))),(0,r.kt)("h3",{id:"example-sending-notification-to-slack"},"Example: Sending Notification to Slack"),(0,r.kt)("p",null,"Assuming there is a slack receiver registered in Siren with ID ",(0,r.kt)("inlineCode",{parentName:"p"},"51"),". Sending to that receiver would require us to have a ",(0,r.kt)("inlineCode",{parentName:"p"},"payload.data")," that have the same format as the expected ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/receivers/slack#message-payload"},"slack")," payload format."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=payload.yaml",title:"payload.yaml"},"payload:\n  data:\n    text: |-\n      New Paid Time Off request from <example.com|Fred Enriquez>\n\n      <https://example.com|View request>\n  template: sample-slack-msg\n")),(0,r.kt)(i.Z,{groupId:"api",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ siren notifications send --file payload.yaml\n"))),(0,r.kt)(l.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)(o.Z,{className:"language-bash",mdxType:"CodeBlock"},"$ curl --request POST\n  --url ",f,"/",b,'/notifications\n  --header \'content-type: application/json\'\n  --data-raw \'{\n    "payload": {\n        "data": {\n          "text": "New Paid Time Off request from <example.com|Fred Enriquez>\n\n<https://example.com|View request>"\n        }\n    }\n}\''))),(0,r.kt)("p",null,"Above end the message to channel name ",(0,r.kt)("inlineCode",{parentName:"p"},"#siren-devs")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"payload.data")," in ",(0,r.kt)("a",{parentName:"p",href:"#slack"},"slack")," payload format."),(0,r.kt)("h2",{id:"alerts-notification"},"Alerts Notification"),(0,r.kt)("p",null,"For all incoming alerts via Siren hook API, notifications are also generated and published via subscriptions. Siren will match labels from the alerts with label matchers in subscriptions. The assigned receivers for all matched subscriptions will get the notifications. More details are explained ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/guides/alert_history"},"here"),". "),(0,r.kt)("p",null,"Siren has a default template for alerts notification for each receiver. Go to the ",(0,r.kt)("a",{parentName:"p",href:"/siren/docs/receivers/slack#default-alert-template"},"Receivers")," section to explore the default template defined by Siren."))}k.isMDXComponent=!0},3618:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}},7694:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]}}}]);